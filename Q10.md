<pre>
<b>Q10 Q10) Create Secure Route in quart project
 One application is already running named with hello based on http and route htquart
 It should run on https with self-signed certificate.
 Subject is â€œ/C=US/ST=North Carolina/L=Raleigh/O=RedHat/CN=quart.apps.ocp4.example.com"
 It should run on https with following url: https://quart.apps.domain3.example.com
 Application should produce output </b>

<h1> Secure Route </h1> 

[mahsan@r9 ~]$  oc new-app --name nginx-target --image=bitnami/nginx
--> Found container image ac4b675 (2 weeks old) from Docker Hub for "bitnami/nginx"

    * An image stream tag will be created as "nginx-target:latest" that will track this image

--> Creating resources ...
    imagestream.image.openshift.io "nginx-target" created
    deployment.apps "nginx-target" created
    service "nginx-target" created
--> Success
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose service/nginx-target'
    Run 'oc status' to view your app.
[mahsan@r9 ~]$ oc get all
Warning: apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
NAME                                READY   STATUS              RESTARTS   AGE
pod/nginx-target-697ddf8f89-zmwwx   0/1     ContainerCreating   0          5s

NAME                   TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)             AGE
service/nginx-target   ClusterIP   10.217.5.135   <none>        8080/TCP,8443/TCP   6s

NAME                           READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/nginx-target   0/1     1            0           6s

NAME                                      DESIRED   CURRENT   READY   AGE
replicaset.apps/nginx-target-697ddf8f89   1         1         0       5s
replicaset.apps/nginx-target-786bbdf7c6   1         0         0       6s

NAME                                          IMAGE REPOSITORY                                                              TAGS     UPDATED
imagestream.image.openshift.io/nginx-target   default-route-openshift-image-registry.apps-crc.testing/monday/nginx-target   latest   5 seconds ago
[mahsan@r9 ~]$ oc get all
Warning: apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
NAME                                READY   STATUS    RESTARTS   AGE
pod/nginx-target-697ddf8f89-zmwwx   1/1     Running   0          43s

NAME                   TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)             AGE
service/nginx-target   ClusterIP   10.217.5.135   <none>        8080/TCP,8443/TCP   44s

NAME                           READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/nginx-target   1/1     1            1           44s

NAME                                      DESIRED   CURRENT   READY   AGE
replicaset.apps/nginx-target-697ddf8f89   1         1         1       43s
replicaset.apps/nginx-target-786bbdf7c6   0         0         0       44s

NAME                                          IMAGE REPOSITORY                                                              TAGS     UPDATED
imagestream.image.openshift.io/nginx-target   default-route-openshift-image-registry.apps-crc.testing/monday/nginx-target   latest   43 seconds ago
[mahsan@r9 ~]$

[mahsan@r9 ~]$ oc get svc
NAME           TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)             AGE
nginx-target   ClusterIP   10.217.5.135   <none>        8080/TCP,8443/TCP   2m6s
[mahsan@r9 ~]$ oc expose svc nginx-target
route.route.openshift.io/nginx-target exposed
[mahsan@r9 ~]$ oc get routes.route.openshift.io
NAME           HOST/PORT                              PATH   SERVICES       PORT       TERMINATION   WILDCARD
nginx-target   nginx-target-monday.apps-crc.testing          nginx-target   8080-tcp                 None
[mahsan@r9 ~]$

[mahsan@r9 ~]$ curl -v nginx-target-monday.apps-crc.testing
*   Trying 192.168.130.11:80...
* Connected to nginx-target-monday.apps-crc.testing (192.168.130.11) port 80 (#0)
> GET / HTTP/1.1
> Host: nginx-target-monday.apps-crc.testing
> User-Agent: curl/7.76.1
> Accept: */*
>
* Mark bundle as not supporting multiuse
< HTTP/1.1 200 OK
< server: nginx
< date: Fri, 04 Apr 2025 16:51:58 GMT
< content-type: text/html
< content-length: 615
< last-modified: Wed, 12 Mar 2025 02:25:00 GMT
< etag: "67d0f07c-267"
< x-frame-options: SAMEORIGIN
< accept-ranges: bytes
< set-cookie: 2ab3a4225bec041047a531364ebb126d=2655f0737d5661cb29055fa39d7c4a9f; path=/; HttpOnly
< cache-control: private
<
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
<style>
html { color-scheme: light dark; }
body { width: 35em; margin: 0 auto;
font-family: Tahoma, Verdana, Arial, sans-serif; }
</style>
</head>
<body>
<h1>Welcome to nginx!</h1>
<p>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.</p>

<p>For online documentation and support please refer to
<a href="http://nginx.org/">nginx.org</a>.<br/>
Commercial support is available at
<a href="http://nginx.com/">nginx.com</a>.</p>

<p><em>Thank you for using nginx.</em></p>
</body>
</html>
* Connection #0 to host nginx-target-monday.apps-crc.testing left intact
[mahsan@r9 ~]$

[mahsan@r9 ~]$ oc get routes.route.openshift.io
NAME           HOST/PORT                              PATH   SERVICES       PORT       TERMINATION   WILDCARD
nginx-target   nginx-target-monday.apps-crc.testing          nginx-target   8080-tcp                 None
[mahsan@r9 ~]$ openssl req -x509 -newkey rsa:2048 -keyout req.key -out req.crt -nodes -days 365 -subj "/C=US/ST=North Carolina/L=Raleigh/O=RedHat/CN=quart.apps.crc.testing"
..+.+......+...+++++++++++++++++++++++++++++++++++++++*......+....+.........+........+....+.....+.+++++++++++++++++++++++++++++++++++++++*..+.......+..+......+...+....+..+.+..+............+...+.+.....+.......+.....+.............+......+..............+............+.......+....................+...+.......+.....+...+....+......+.....+....+.....................+.....+.........+.........+.+...+..+......+..........+..+.+..............+.+..+...+....+...............+...++++++
...+++++++++++++++++++++++++++++++++++++++*...+..+.+........+.........+.......+...+...........+....+...+...+..+.........+.+++++++++++++++++++++++++++++++++++++++*.+......+..+......+.+...+.....................+..+.........+......+....+...+........+.........+................+..+......+.+....................+......+...+..........+..+....++++++
-----

-rw-------  1 mahsan mahsan     1704 Apr  4 11:15 req.key
-rw-r--r--  1 mahsan mahsan     1346 Apr  4 11:15 req.crt
[mahsan@r9 ~]$

[mahsan@r9 ~]$ oc get svc
NAME           TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)             AGE
nginx-target   ClusterIP   10.217.5.135   <none>        8080/TCP,8443/TCP   19m
[mahsan@r9 ~]$ oc create route edge htquart --service=nginx-target --hostname=quart.apps-crc.testing --cert ./req.crt --key ./req.key
route.route.openshift.io/htquart created
[mahsan@r9 ~]$

[mahsan@r9 ~]$ oc get routes.route.openshift.io
NAME      HOST/PORT                PATH   SERVICES       PORT       TERMINATION   WILDCARD
htquart   quart.apps-crc.testing          nginx-target   8080-tcp   edge          None
[mahsan@r9 ~]$
</pre>

